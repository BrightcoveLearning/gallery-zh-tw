---
title:使用基於角色的訪問控制
parent: Virtual Event 
grandparent: Experiences
description: In this topic you will learn how to use role-based access control to restrict the videos that appear in an experience based upon the user's role.
layout: staging
---
 <h1>使用基於角色的訪問控制</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>如果要求用戶登錄到您的虛擬事件體驗，則可以使用基於角色的訪問控制來過濾根據用戶角色向用戶顯示的視頻。基於角色的訪問控制依賴於由用戶管理系統（即註冊系統，SSO）返回的用戶對像上的指定SAML屬性。規則是根據用戶角色和視頻雲標籤定義的。Brightcove建議所有視頻都具有一個標籤來標識事件，並為需要進行的任何基於角色的過濾使用附加標籤。</p>
    <p>要配置基於角色的訪問控制，首先要確定內容的限制方式，然後創建適當的基於角色的訪問配置文件。以下各節提供了一些示例配置。接下來，將基於角色的配置文件與體驗相關聯。最後，適當地標記視頻。</p>
    <aside class="bcls-aside bcls-aside--information">筆記：創建視頻收藏集時，<strong>播放清單</strong>不應將其用作收集條件，因為播放列表不支持基於角色的訪問控製過濾。用<strong>風俗</strong>取而代之的標準。</aside>
  </section>
  <section class="bcls-section">
    <h2 id="creating">創建基於角色的訪問配置文件</h2>
    <p>使用單獨的基於角色的訪問配置文件來配置基於角色的訪問控制。該文件的格式如下：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {}
}   
   </code></pre>
    <p>文件中的屬性值控制如何將訪問權限應用於體驗。</p>
    <ul>
      <li><strong>advancedRoleFilter</strong> -設置為<strong>真的</strong>，啟用基於角色的訪問控制</li>
      <li><strong>defaultIncludeTags</strong> -必須在所有視頻上顯示的標籤才能在虛擬事件體驗中顯示。這樣，您只能在“虛擬事件體驗"的帳戶中僅顯示一部分視頻。</li>
      <li><strong>defaultIgnoreTags</strong> -具有這些標籤的視頻將不會顯示給不屬於角色的用戶</li>
      <li><strong>角色屬性</strong> -從用戶管理系統返回的用戶記錄上的SAML屬性。可以使用任何SAML屬性。</li>
      <li><strong>valueDelimiter</strong> -用於分隔多個角色的定界符（如果可以返回多個角色）</li>
      <li><strong>ignoreByRole</strong> -增強<code translate="No">defaultIgnoreTags</code>通過根據用戶角色另外忽略更多標籤。這用於刪除用戶根據自己的角色可以看到的更多視頻。</li>
      <li><strong>includeByRole</strong> -分配了角色的用戶將只能看到帶有指定標籤的視頻</li>
      <li><strong>allowByRole</strong> -增強<code translate="No">defaultIncludeTags</code>通過根據用戶的角色另外添加更多標籤。這用於根據用戶的角色向用戶顯示更多視頻。具有指定角色的用戶將看到標有的視頻<code translate="No">defaultIncludeTags</code>以及此處列出的標籤。</li>
    </ul>
    以下各節提供了一些示例配置文件。</section>
  <section class="bcls-section">
    <h2 id="single-premium">單一保費角色</h2>
    <p>在這種情況下，普通用戶可以查看大多數內容，但是標有“premium"標籤的內容子集僅對具有“premium_user"角色的用戶可用。高級用戶仍然可以看到普通用戶可以看到的所有內容。使用“virtual_event"標記可將網站限制為僅顯示該事件專用標記的帳戶中的內容：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "premium_user": ["premium"]
     }
}   
   </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="tiered-content">分層內容訪問</h2>
    <p>與第一種情況類似，但是具有多個層，其中每個層都可以訪問更多內容，並且仍然可以看到較低層的所有內容。用戶角色為“tier_1"，“tier_2"和“tier_3"，而沒有這些角色之一的用戶將看不到任何分層內容。標籤分別是“tier1"，“tier2"和“tier3"：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tier1", "tier2", "tier3"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "tier_1": ["tier1"],
          "tier_2": ["tier1", "tier2"],
          "tier_3": ["tier1", "tier2", "tier3"]
     } 
} 
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="split-content">分割內容訪問</h2>
    <p>在此示例中，兩個用戶角色僅看到專門為其角色標記的視頻。沒有角色的用戶將看不到以下兩個標籤的內容：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tag1", "tag2"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "role1": ["tag1"],
          "role2": ["tag2"]
     },
     "allowByRole": {}
}    
    </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="language">按語言細分</h2>
    <p>使用基於拆分的方法，可以基於包含用戶語言的SAML屬性來提供內容：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": [],
     "roleAttribute": "language",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "en": ["english"],
          "es": ["spanish"],
          "jp": ["japanese"]
     },
     "allowByRole": {}
}     
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="merged-rules">合併規則示例</h2>
    <p>這個人為的例子說明瞭如何組合不同的選項。普通用戶將看到所有標記為“virtual_event"且未標記為“premium"的內容。具有“premium_user"角色的用戶將看到所有常規內容以及高級內容，但不會看到帶有“promotional"標籤的內容。具有“trial_user"角色的用戶將看到常規內容和高級內容，但還將看到帶有“promotional"標籤的內容。具有“expired_user"角色的用戶將僅看到標記為促銷的視頻：</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {
          "premium_user": ["promotional"]
     },
     "includeByRole": { "expired_user": ["promotional"]
     },
     "allowByRole": {
          "trial_user": ["promotional"],
          "premium_user": ["premium"]
     }
}
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="assign">分配基於角色的訪問配置文件</h2>
    <p>創建基於角色的訪問配置文件以控制對內容的訪問後，將其與體驗相關聯。</p>
    <ol class="bcls-tasklist">
      <li>將訪問控製配置文件複製到剪貼板。</li>
      <li>開啟「  圖庫」  模組。</li>
      <li>編輯體驗。</li>
      <li>點擊<strong>外觀和行為&gt;自定義</strong>在左側導航欄中。</li>
      <li>將訪問配置文件配置粘貼到<strong>自定義模板JSON</strong>場地。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-json.png" /></figure>
        <aside class="bcls-aside bcls-aside--information">筆記：如果未顯示此字段，則該帳戶尚未啟用基於角色的訪問控制。</aside>
      </li>
      <li>點擊<strong>保存</strong>。</li>
    </ol>
    <p>確保你<a href="/portal/previewing-and-publishing-portal-experience.html">重新發布經驗</a>所以變化出現。</p>
  </section>
  <section class="bcls-section">
    <h2 id="attributes">公開SAML屬性</h2>
    <p>為了使體驗可以從SSO /註冊系統提供者訪問角色屬性，請確保正確配置了SSO設置。</p>
    <ol class="bcls-tasklist">
      <li>開啟「  圖庫」  模組。</li>
      <li>點擊<strong>設置</strong>畫廊主頁上的鏈接。</li>
      <li>在左側導航中，單擊<strong>訪問控製配置文件</strong> .將會顯示建立的「存取控制設定檔」清單。</li>
      <li>單擊虛擬事件體驗正在使用的配置文件的編輯圖標。</li>
      <li>確認<strong>公開所有屬性</strong>頁面底部的選項已選中。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-expose-attributes.png" /></figure>
      </li>
      <li>點擊<strong>保存</strong>。</li>
    </ol>
  </section>
</article>